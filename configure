#!/bin/bash

set -euo pipefail

C_COMPILER="${C_COMPILER:-clang-14}"
CXX_COMPILER="${CXX_COMPILER:-clang++-14}"
BUILD_DIR="${BUILD_DIR:-build}"
BUILD_TYPE="${BUILD_TYPE:-RelWithDebInfo}"

cmake -B "${BUILD_DIR}" -S . -G Ninja \
  "-DCMAKE_EXPORT_COMPILE_COMMANDS=On" \
  "-DCMAKE_BUILD_TYPE=${BUILD_TYPE}" \
  "-DCMAKE_C_COMPILER=${C_COMPILER}" \
  "-DCMAKE_CXX_COMPILER=${CXX_COMPILER}" "$@"
